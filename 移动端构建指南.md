# Potato Chat ç§»åŠ¨ç«¯æ„å»ºæŒ‡å—

## ğŸ¯ æ„å»ºç›®æ ‡

æœ¬æŒ‡å—å°†æŒ‡å¯¼æ‚¨åœ¨å®Œæ•´å¼€å‘ç¯å¢ƒä¸­æ„å»º Potato Chat çš„ Android APK å’Œ iOS IPA å®‰è£…åŒ…ã€‚

## ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡

### Android æ„å»ºç¯å¢ƒ

#### å¿…éœ€è½¯ä»¶
1. **Java Development Kit (JDK) 17+**
   ```bash
   # Ubuntu/Debian
   sudo apt update
   sudo apt install openjdk-17-jdk
   
   # macOS (ä½¿ç”¨Homebrew)
   brew install openjdk@17
   
   # Windows
   # ä»Oracleå®˜ç½‘ä¸‹è½½JDK 17å¹¶å®‰è£…
   ```

2. **Android Studio** æˆ– **Android Command Line Tools**
   ```bash
   # ä¸‹è½½Android Studio
   # https://developer.android.com/studio
   
   # æˆ–è€…åªå®‰è£…å‘½ä»¤è¡Œå·¥å…·
   # https://developer.android.com/studio/command-line
   ```

3. **Android SDK é…ç½®**
   ```bash
   # è®¾ç½®ç¯å¢ƒå˜é‡
   export ANDROID_HOME=$HOME/Android/Sdk
   export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools
   
   # å®‰è£…å¿…éœ€çš„SDKåŒ…
   sdkmanager "platform-tools" "platforms;android-34" "build-tools;34.0.0"
   ```

#### ç¯å¢ƒéªŒè¯
```bash
# éªŒè¯Javaå®‰è£…
java -version
# æœŸæœ›è¾“å‡ºï¼šopenjdk version "17.x.x"

# éªŒè¯Android SDK
echo $ANDROID_HOME
# æœŸæœ›è¾“å‡ºï¼šSDKå®‰è£…è·¯å¾„

# éªŒè¯Gradle
cd /workspace/potato-chat-mobile/android
./gradlew --version
# æœŸæœ›è¾“å‡ºï¼šGradleç‰ˆæœ¬ä¿¡æ¯
```

### iOS æ„å»ºç¯å¢ƒ

#### å¿…éœ€è½¯ä»¶ (ä»…macOS)
1. **Xcode 14+**
   ```bash
   # ä»App Storeå®‰è£…Xcode
   # æˆ–ä»Apple Developerç½‘ç«™ä¸‹è½½
   ```

2. **Command Line Tools**
   ```bash
   xcode-select --install
   ```

3. **CocoaPods**
   ```bash
   sudo gem install cocoapods
   # æˆ–ä½¿ç”¨Homebrew
   brew install cocoapods
   ```

#### ç¯å¢ƒéªŒè¯
```bash
# éªŒè¯Xcode
xcode-select -p
# æœŸæœ›è¾“å‡ºï¼šXcodeè·¯å¾„

# éªŒè¯CocoaPods
pod --version
# æœŸæœ›è¾“å‡ºï¼šCocoaPodsç‰ˆæœ¬

# éªŒè¯iOSæ¨¡æ‹Ÿå™¨
xcrun simctl list devices
# æœŸæœ›è¾“å‡ºï¼šå¯ç”¨æ¨¡æ‹Ÿå™¨åˆ—è¡¨
```

## ğŸ”¨ Android APK æ„å»º

### æ„å»ºæ­¥éª¤

#### 1. é¡¹ç›®å‡†å¤‡
```bash
# è¿›å…¥ç§»åŠ¨ç«¯é¡¹ç›®ç›®å½•
cd /workspace/potato-chat-mobile

# ç¡®ä¿Webåº”ç”¨æ˜¯æœ€æ–°ç‰ˆæœ¬
npm run build:web

# åŒæ­¥åˆ°åŸç”Ÿé¡¹ç›®
./node_modules/.bin/cap sync
```

#### 2. Androidé¡¹ç›®é…ç½®
```bash
# è¿›å…¥Androidé¡¹ç›®ç›®å½•
cd android

# æ¸…ç†ä¹‹å‰çš„æ„å»º
./gradlew clean

# æ£€æŸ¥é¡¹ç›®é…ç½®
./gradlew tasks
```

#### 3. æ„å»ºè°ƒè¯•ç‰ˆAPK
```bash
# æ„å»ºè°ƒè¯•ç‰ˆæœ¬ (æ— éœ€ç­¾å)
./gradlew assembleDebug

# è¾“å‡ºæ–‡ä»¶ä½ç½®
# app/build/outputs/apk/debug/app-debug.apk
```

#### 4. æ„å»ºå‘å¸ƒç‰ˆAPK
```bash
# ç”Ÿæˆç­¾åå¯†é’¥ (é¦–æ¬¡æ„å»º)
keytool -genkey -v -keystore potato-chat-release.keystore \
  -alias potato-chat -keyalg RSA -keysize 2048 -validity 10000

# é…ç½®ç­¾åä¿¡æ¯ (åœ¨app/build.gradleä¸­)
android {
    signingConfigs {
        release {
            storeFile file('potato-chat-release.keystore')
            storePassword 'your-store-password'
            keyAlias 'potato-chat'
            keyPassword 'your-key-password'
        }
    }
    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}

# æ„å»ºå‘å¸ƒç‰ˆæœ¬
./gradlew assembleRelease

# è¾“å‡ºæ–‡ä»¶ä½ç½®
# app/build/outputs/apk/release/app-release.apk
```

#### 5. æ„å»ºAABåŒ… (Google Play)
```bash
# æ„å»ºAndroid App Bundle
./gradlew bundleRelease

# è¾“å‡ºæ–‡ä»¶ä½ç½®
# app/build/outputs/bundle/release/app-release.aab
```

### å®‰è£…å’Œæµ‹è¯•

#### è°ƒè¯•ç‰ˆæœ¬å®‰è£…
```bash
# è¿æ¥Androidè®¾å¤‡æˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨
adb devices

# å®‰è£…APK
adb install app/build/outputs/apk/debug/app-debug.apk

# å¯åŠ¨åº”ç”¨
adb shell am start -n com.potato.chat.mobile/.MainActivity
```

#### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
adb logcat | grep -i potato

# æŸ¥çœ‹Capacitoræ—¥å¿—
adb logcat | grep -i capacitor
```

## ğŸ iOS IPA æ„å»º

### æ„å»ºæ­¥éª¤

#### 1. é¡¹ç›®å‡†å¤‡
```bash
# è¿›å…¥ç§»åŠ¨ç«¯é¡¹ç›®ç›®å½•
cd /workspace/potato-chat-mobile

# ç¡®ä¿Webåº”ç”¨æ˜¯æœ€æ–°ç‰ˆæœ¬
npm run build:web

# åŒæ­¥åˆ°åŸç”Ÿé¡¹ç›®
./node_modules/.bin/cap sync
```

#### 2. iOSé¡¹ç›®é…ç½®
```bash
# è¿›å…¥iOSé¡¹ç›®ç›®å½•
cd ios

# å®‰è£…CocoaPodsä¾èµ–
pod install

# æ›´æ–°ä¾èµ– (å¦‚éœ€è¦)
pod update
```

#### 3. åœ¨Xcodeä¸­æ„å»º

##### æ‰“å¼€é¡¹ç›®
```bash
# æ‰“å¼€Xcodeå·¥ä½œç©ºé—´
open App/App.xcworkspace
```

##### é…ç½®é¡¹ç›®
1. **é€‰æ‹©Team**
   - åœ¨é¡¹ç›®è®¾ç½®ä¸­é€‰æ‹©å¼€å‘å›¢é˜Ÿ
   - é…ç½®Bundle Identifierï¼ˆå¦‚éœ€ä¿®æ”¹ï¼‰

2. **é…ç½®ç­¾å**
   - é€‰æ‹©"Automatically manage signing"
   - æˆ–æ‰‹åŠ¨é…ç½®Provisioning Profile

##### æ„å»ºè°ƒè¯•ç‰ˆæœ¬
1. **é€‰æ‹©ç›®æ ‡**
   - é€‰æ‹©iOSè®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨
   - ç¡®ä¿é€‰æ‹©"App"ä½œä¸ºScheme

2. **æ„å»ºå¹¶è¿è¡Œ**
   - ç‚¹å‡»â–¶ï¸è¿è¡ŒæŒ‰é’®
   - æˆ–ä½¿ç”¨å¿«æ·é”® Cmd+R

##### æ„å»ºå‘å¸ƒç‰ˆæœ¬
1. **Archiveæ„å»º**
   - Product â†’ Archive
   - ç­‰å¾…æ„å»ºå®Œæˆ

2. **å¯¼å‡ºIPA**
   - åœ¨Organizerä¸­é€‰æ‹©Archive
   - ç‚¹å‡»"Distribute App"
   - é€‰æ‹©åˆ†å‘æ–¹å¼ï¼š
     - Development (å¼€å‘æµ‹è¯•)
     - Ad Hoc (ä¸´æ—¶åˆ†å‘)
     - App Store (å•†åº—å‘å¸ƒ)

#### 4. å‘½ä»¤è¡Œæ„å»º (å¯é€‰)
```bash
# æ¸…ç†é¡¹ç›®
xcodebuild -workspace App/App.xcworkspace -scheme App clean

# æ„å»ºé¡¹ç›®
xcodebuild -workspace App/App.xcworkspace -scheme App \
  -configuration Release -destination generic/platform=iOS build

# åˆ›å»ºArchive
xcodebuild -workspace App/App.xcworkspace -scheme App \
  -configuration Release -destination generic/platform=iOS \
  -archivePath App.xcarchive archive

# å¯¼å‡ºIPA
xcodebuild -exportArchive -archivePath App.xcarchive \
  -exportPath . -exportOptionsPlist ExportOptions.plist
```

### å®‰è£…å’Œæµ‹è¯•

#### æ¨¡æ‹Ÿå™¨å®‰è£…
```bash
# æŸ¥çœ‹å¯ç”¨æ¨¡æ‹Ÿå™¨
xcrun simctl list devices

# å¯åŠ¨æ¨¡æ‹Ÿå™¨
xcrun simctl boot "iPhone 15"

# å®‰è£…åº”ç”¨åˆ°æ¨¡æ‹Ÿå™¨
xcrun simctl install booted App.app

# å¯åŠ¨åº”ç”¨
xcrun simctl launch booted com.potato.chat.mobile
```

#### è®¾å¤‡å®‰è£…
1. **é€šè¿‡Xcode**
   - è¿æ¥iOSè®¾å¤‡
   - åœ¨Xcodeä¸­é€‰æ‹©è®¾å¤‡
   - ç‚¹å‡»è¿è¡Œ

2. **é€šè¿‡iTunes/Finder**
   - å°†IPAæ–‡ä»¶æ‹–æ‹½åˆ°è®¾å¤‡
   - æˆ–ä½¿ç”¨Apple Configurator

## ğŸ“¦ æ–‡ä»¶è¾“å‡ºè¯´æ˜

### Androidè¾“å‡ºæ–‡ä»¶
```
android/app/build/outputs/
â”œâ”€â”€ apk/
â”‚   â”œâ”€â”€ debug/
â”‚   â”‚   â””â”€â”€ app-debug.apk           # è°ƒè¯•ç‰ˆAPK (å¯ç›´æ¥å®‰è£…)
â”‚   â””â”€â”€ release/
â”‚       â””â”€â”€ app-release.apk         # å‘å¸ƒç‰ˆAPK (éœ€ç­¾å)
â”œâ”€â”€ bundle/
â”‚   â””â”€â”€ release/
â”‚       â””â”€â”€ app-release.aab         # Google Play Bundle
â””â”€â”€ logs/
    â””â”€â”€ manifest-merger-release-report.txt
```

### iOSè¾“å‡ºæ–‡ä»¶
```
ios/build/
â”œâ”€â”€ App.xcarchive/                  # Xcode Archive
â”œâ”€â”€ App.ipa                         # iOSå®‰è£…åŒ…
â”œâ”€â”€ App.app/                        # åº”ç”¨Bundle (æ¨¡æ‹Ÿå™¨)
â””â”€â”€ ExportOptions.plist             # å¯¼å‡ºé…ç½®
```

## ğŸ” æ„å»ºéªŒè¯

### åŠŸèƒ½æµ‹è¯•æ¸…å•
- [ ] åº”ç”¨å¯åŠ¨æ­£å¸¸
- [ ] ç™»å½•åŠŸèƒ½å·¥ä½œ
- [ ] èŠå¤©åŠŸèƒ½å¯ç”¨
- [ ] é’±åŒ…æ¨¡å—æ­£å¸¸
- [ ] å°ç¨‹åºå¯è®¿é—®
- [ ] æ¨é€é€šçŸ¥å·¥ä½œ
- [ ] ç›¸æœºæƒé™æ­£å¸¸
- [ ] å®šä½åŠŸèƒ½å¯ç”¨
- [ ] ç½‘ç»œè¯·æ±‚æˆåŠŸ
- [ ] ç¦»çº¿åŠŸèƒ½æ­£å¸¸

### æ€§èƒ½æµ‹è¯•
```bash
# Androidæ€§èƒ½æµ‹è¯•
adb shell dumpsys meminfo com.potato.chat.mobile
adb shell dumpsys cpuinfo | grep potato

# iOSæ€§èƒ½æµ‹è¯• (é€šè¿‡Xcode Instruments)
# - Time Profiler
# - Allocations
# - Network
```

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### Androidæ„å»ºé—®é¢˜

#### 1. Gradleæ„å»ºå¤±è´¥
```bash
# æ¸…ç†Gradleç¼“å­˜
./gradlew clean
rm -rf ~/.gradle/caches

# æ£€æŸ¥Javaç‰ˆæœ¬
java -version

# ç¡®ä¿ANDROID_HOMEæ­£ç¡®
echo $ANDROID_HOME
```

#### 2. ç­¾åé—®é¢˜
```bash
# éªŒè¯ç­¾å
jarsigner -verify -verbose -certs app-release.apk

# é‡æ–°ç”Ÿæˆå¯†é’¥
keytool -genkey -v -keystore new-release-key.keystore \
  -alias alias_name -keyalg RSA -keysize 2048 -validity 10000
```

#### 3. æƒé™é—®é¢˜
- æ£€æŸ¥AndroidManifest.xmlä¸­çš„æƒé™å£°æ˜
- ç¡®ä¿target SDKç‰ˆæœ¬æ­£ç¡®

### iOSæ„å»ºé—®é¢˜

#### 1. è¯ä¹¦é—®é¢˜
```bash
# æ£€æŸ¥è¯ä¹¦çŠ¶æ€
security find-identity -v -p codesigning

# é‡æ–°ç™»å½•å¼€å‘è€…è´¦å·
# Xcode â†’ Preferences â†’ Accounts
```

#### 2. Provisioning Profileé—®é¢˜
- ç¡®ä¿Bundle IDåŒ¹é…
- æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ
- é‡æ–°ä¸‹è½½Profile

#### 3. CocoaPodsé—®é¢˜
```bash
# æ¸…ç†CocoaPodsç¼“å­˜
pod cache clean --all
rm -rf Pods/ Podfile.lock
pod install
```

## ğŸ“Š æ„å»ºç»Ÿè®¡

### é¢„æœŸæ„å»ºæ—¶é—´
| å¹³å° | é¦–æ¬¡æ„å»º | å¢é‡æ„å»º |
|------|----------|----------|
| Android Debug | 3-5åˆ†é’Ÿ | 30-60ç§’ |
| Android Release | 5-8åˆ†é’Ÿ | 1-2åˆ†é’Ÿ |
| iOS Debug | 2-4åˆ†é’Ÿ | 30-45ç§’ |
| iOS Release | 4-6åˆ†é’Ÿ | 1-2åˆ†é’Ÿ |

### åº”ç”¨å¤§å°
| å¹³å° | è°ƒè¯•ç‰ˆ | å‘å¸ƒç‰ˆ |
|------|--------|--------|
| Android APK | ~25MB | ~15MB |
| Android AAB | - | ~12MB |
| iOS IPA | ~30MB | ~20MB |

## ğŸš€ å‘å¸ƒå‡†å¤‡

### Google Play å‘å¸ƒ
1. **åˆ›å»ºå¼€å‘è€…è´¦å·**
   - æ³¨å†ŒGoogle Play Developerè´¦å·
   - æ”¯ä»˜ä¸€æ¬¡æ€§æ³¨å†Œè´¹ç”¨

2. **å‡†å¤‡åº”ç”¨èµ„æ–™**
   - åº”ç”¨å›¾æ ‡ (512Ã—512)
   - æˆªå± (å„ç§è®¾å¤‡å°ºå¯¸)
   - åº”ç”¨æè¿°
   - éšç§æ”¿ç­–é“¾æ¥

3. **ä¸Šä¼ AAB**
   - ä¸Šä¼ signed AABæ–‡ä»¶
   - å¡«å†™ç‰ˆæœ¬ä¿¡æ¯
   - é…ç½®å†…å®¹åˆ†çº§

### App Store å‘å¸ƒ
1. **åˆ›å»ºå¼€å‘è€…è´¦å·**
   - æ³¨å†ŒApple Developerè´¦å·
   - æ”¯ä»˜å¹´è´¹

2. **App Store Connecté…ç½®**
   - åˆ›å»ºåº”ç”¨è®°å½•
   - é…ç½®åº”ç”¨ä¿¡æ¯
   - ä¸Šä¼ æˆªå±å’Œå…ƒæ•°æ®

3. **ä¸Šä¼ IPA**
   - ä½¿ç”¨Xcodeä¸Šä¼ 
   - æˆ–ä½¿ç”¨Application Loader
   - ç­‰å¾…å®¡æ ¸

## âœ… å®Œæˆæ¸…å•

### æ„å»ºå‰æ£€æŸ¥
- [ ] å¼€å‘ç¯å¢ƒé…ç½®å®Œæˆ
- [ ] æ‰€æœ‰ä¾èµ–å·²å®‰è£…
- [ ] Webåº”ç”¨å·²æ„å»º
- [ ] é¡¹ç›®é…ç½®æ­£ç¡®

### æ„å»ºåéªŒè¯
- [ ] å®‰è£…åŒ…ç”ŸæˆæˆåŠŸ
- [ ] åº”ç”¨å¯æ­£å¸¸å®‰è£…
- [ ] æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡

### å‘å¸ƒå‡†å¤‡
- [ ] ç­¾åé…ç½®æ­£ç¡®
- [ ] åº”ç”¨èµ„æ–™å‡†å¤‡å®Œæˆ
- [ ] éšç§æ”¿ç­–å’Œæ¡æ¬¾å°±ç»ª
- [ ] æµ‹è¯•ç‰ˆæœ¬éªŒè¯é€šè¿‡

---

**æ„å»ºæŒ‡å—ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-06-19 16:44:25  
**æ”¯æŒå¹³å°**: Android 7.0+ / iOS 13.0+  
